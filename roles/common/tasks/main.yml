---
# ğŸ”§ ROLE COMMON - ConfiguraciÃ³n base para todos los servidores
- name: "ğŸ”§ Instalar paquetes bÃ¡sicos del sistema"
  apt:
    name: "{{ common_packages }}"
    state: present

- name: "ğŸ‘¥ Gestionar usuarios del sistema"
  include_tasks: users.yml

- name: "ğŸ”¥ Configurar firewall bÃ¡sico"
  ufw:
    state: enabled
    policy: deny
    direction: incoming

- name: "ğŸ”“ Permitir SSH"
  ufw:
    rule: allow
    port: "{{ security_settings.ssh_port }}"

- name: "â° Configurar timezone"
  timezone:
    name: "{{ system_timezone }}"

- name: "ğŸ“‹ Configurar logrotate"
  template:
    src: logrotate.conf.j2
    dest: /etc/logrotate.d/curso-infra
    owner: root
    group: root
    mode: '0644'
  when: logging_config.enable_logrotate
